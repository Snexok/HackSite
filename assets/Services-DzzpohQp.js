var S=Object.defineProperty;var N=(t,s,r)=>s in t?S(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r;var m=(t,s,r)=>N(t,typeof s!="symbol"?s+"":s,r);import{r as n,j as e,c as y}from"./index-BXml4say.js";import{c as b,u as w,g as C}from"./api-BouXgZMV.js";class E{constructor(s,r,o,c){m(this,"id");m(this,"title");m(this,"description");m(this,"price");this.id=s,this.title=r,this.description=o,this.price=c}}const R=({onSubmit:t})=>{const[s,r]=n.useState(""),[o,c]=n.useState(""),[x,p]=n.useState(0),i=n.useRef(null),d=()=>{var u;const a=i.current;a&&(a.style.height="auto",a.style.height=Math.min(a.scrollHeight,5*parseFloat(getComputedStyle(a).lineHeight))+"px",c(((u=i.current)==null?void 0:u.value)||""))},g=()=>{const a=new E(null,s,o,x);b(a).then(()=>{t()})};return e.jsxs("div",{className:"flex flex-col w-full px-6 py-4 gap-2",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"text-primary-green border-b border-transparent",children:"Title:"}),e.jsx("input",{className:"px-1 border-b border-primary-green bg-transparent outline-0 caret-primary-green text-secondary-green",onChange:({target:a})=>r(a.value)})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"text-primary-green border-b border-transparent",children:"Desc:"}),e.jsx("textarea",{ref:i,rows:1,className:"text-secondary-green border-b border-primary-green bg-transparent w-full overflow-hidden resize-none outline-0 ",onInput:d})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"text-primary-green border-b border-transparent",children:"Price:"}),e.jsx("input",{className:"px-1 border-b border-primary-green bg-transparent outline-0 caret-primary-green text-secondary-green",onChange:({target:a})=>p(+a.value)})]})]}),e.jsx("div",{onClick:g,className:"text-xl text-accent hover:text-text cursor-pointer",children:"Создать"})]})},H=({service:t,idx:s})=>{const[r,o]=n.useState(!1),[c,x]=n.useState(t.title),[p,i]=n.useState(t.description),[d,g]=n.useState(t.price),a=n.useRef(null),u=()=>{var f;const l=a.current;l&&(l.style.height="auto",l.style.height=Math.min(l.scrollHeight,5*parseFloat(getComputedStyle(l).lineHeight))+"px",i(((f=a.current)==null?void 0:f.value)||""))};n.useEffect(()=>{u()},[r]);const j=()=>{w({...t,title:c,description:p,price:d})},h=l=>{l.key==="Enter"&&j()};return e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("span",{className:"cursor-default",children:[s+1,"."]}),e.jsx("span",{className:y({"text-text":r},{"text-primary-green":!r},"hover:text-accent select-none cursor-pointer"),onClick:()=>o(l=>!l),children:t.title})]}),r&&e.jsxs("div",{className:"flex flex-col px-5",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("span",{className:"text-primary-green cursor-default",children:"title: "}),e.jsx("input",{className:"w-full text-secondary-green bg-transparent outline-0",maxLength:32,value:c,onChange:({target:l})=>x(l.value),onKeyDown:h})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("span",{className:"text-primary-green cursor-default",children:"description: "}),e.jsx("textarea",{ref:a,value:p,rows:1,maxLength:200,className:"text-secondary-green bg-transparent w-full overflow-hidden resize-none outline-0 ",onInput:u,children:t.description})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("span",{className:"text-primary-green cursor-default",children:"price: "}),e.jsx("input",{className:"w-full text-secondary-green bg-transparent outline-0",maxLength:16,value:d,onChange:({target:l})=>g(+l.value),onKeyDown:h})]})]})]})},v=20,I=({reloadUserList:t})=>{const[s,r]=n.useState([]),o=n.useRef(null),c=n.useRef(0),x=()=>{C(c.current,v).then(({data:i})=>{r(d=>[...d,...i])})},p=()=>{c.current+=1,x()};return n.useEffect(()=>{x()},[t]),e.jsxs("div",{className:"flex flex-col p-4 gap-4",ref:o,children:[s.map((i,d)=>e.jsx(H,{service:i,idx:d},i.id)),!(s.length<v*(c.current+1))&&e.jsx("span",{className:"text-accent cursor-pointer hover:text-text",onClick:p,children:"load more..."})]})},D=()=>{const[t,s]=n.useState(!1),[r,o]=n.useState(0);return e.jsxs("div",{className:"flex flex-col max-w-xl",children:[e.jsxs("div",{className:"cursor-pointer hover:text-accent select-none",onClick:()=>s(c=>!c),children:[t?"-":"+"," Добавить услугу"]}),t&&e.jsx(R,{onSubmit:()=>{s(!1),o(c=>c+1)}}),e.jsx(I,{reloadUserList:r})]})};export{D as default};
